<Window x:Class="APP.Views.UserManagement"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:APP.Views"
        mc:Ignorable="d"
        Title="UserManagement" Height="450" Width="800"
        WindowState="Maximized"
          WindowStyle="None"
  ResizeMode="NoResize"
         xmlns:uc ="clr-namespace:APP.UserControls"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <uc:UCControlBar></uc:UCControlBar>
        <Grid Grid.Row="1" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,20,10" HorizontalAlignment="Right">
                <Button Background="Green" Height="40" Command="{Binding ShowAddCommand}">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Foreground="White" Width="20" Height="20" VerticalAlignment="Center" Kind="Add"></materialDesign:PackIcon>
                        <Label Foreground="White">Add</Label>
                    </StackPanel>
                </Button>
            </Grid>
            <Grid Grid.Row="1">
                <DataGrid x:Name="MyDataGrid"
  AutoGenerateColumns="False" 
  ItemsSource="{Binding Users}" 
  CanUserAddRows="False"
  SelectionMode="Extended"
  GridLinesVisibility="None"
  RowBackground="White"
  AlternatingRowBackground="#F5F5F5"
  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderBrush" Value="Gray"/>
                            <Setter Property="BorderThickness" Value="0.5"/>
                            <Setter Property="Padding" Value="4"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
                            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
                        </Style>
                    </DataGrid.CellStyle>
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="SteelBlue"/>
                            <!-- màu bạn muốn -->
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="Height" Value="40"/>
                            <Setter Property="FontSize" Value="20"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="UserID" Binding="{Binding UserID}" Width="80"/>
                        <DataGridTextColumn Header="UserName" Binding="{Binding UserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTextColumn Header="PassWord" Binding="{Binding PassWord, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                        <DataGridTemplateColumn  Header="Role"  Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <ComboBox Margin="5" ItemsSource="{Binding DataContext.Roles, RelativeSource={RelativeSource AncestorType=DataGrid}}" SelectedItem="{Binding Role, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="" Width="250">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                                        <Button  Margin="0,0,10,0" Height="35"
                      Command="{Binding DataContext.UpdateCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                      CommandParameter="{Binding}" 
                      Background="Yellow" Foreground="White">
                                            <StackPanel Orientation="Horizontal">
                                                <materialDesign:PackIcon Foreground="Black" VerticalAlignment="Center" Kind="Update"></materialDesign:PackIcon>
                                                <Label  Foreground="Black">Update</Label>
                                            </StackPanel>
                                        </Button>
                                        <Button  Height="35"
                      Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                      CommandParameter="{Binding}" 
                      Background="Red" Foreground="White">
                                            <StackPanel Orientation="Horizontal">
                                                <materialDesign:PackIcon VerticalAlignment="Center" Kind="Delete"></materialDesign:PackIcon>
                                                <Label Foreground="White">Delete</Label>
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
                <GroupBox x:Name="AddPopup" Margin="0,0,0,300"
               Width="400"
               Padding="10"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"
               Visibility="{Binding IsShowAdd}" Background="AliceBlue">

                    <GroupBox.Header>
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Foreground="White" VerticalAlignment="Center" Kind="AddAlert"></materialDesign:PackIcon>
                            <Label Foreground="White" FontSize="15">Add Error Master</Label>
                        </StackPanel>
                    </GroupBox.Header>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.Resources>
                                <Style TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
                                    <Setter Property="Padding" Value="5"></Setter>
                                    <Setter Property="Margin" Value="0,0,0,5"></Setter>
                                </Style>
                                <Style TargetType="Label">
                                    <Setter Property="FontWeight" Value="Medium"></Setter>
                                </Style>
                            </Grid.Resources>

                            <Grid.RowDefinitions>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Label>UserID</Label>
                                <TextBox Grid.Column="1" Text="{Binding UserID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                            </Grid>
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Label>User Name:</Label>
                                <TextBox Grid.Column="1" Text="{Binding UserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                            </Grid>
                            <Grid Grid.Row="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Label>PassWord:</Label>
                                <TextBox Grid.Column="1" Text="{Binding PassWord, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></TextBox>
                            </Grid>
                            <Grid Grid.Row="3">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Label>Role:</Label>
                                <ComboBox Style="{StaticResource MaterialDesignOutlinedComboBox}" Grid.Column="1" ItemsSource="{Binding Roles}" SelectedItem="{Binding RoleNew, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></ComboBox>
                            </Grid>
                        </Grid>
                        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <Button Command="{Binding SaveAddCommand}" Margin="0,0,10,0" Background="Green">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="ContentSave"></materialDesign:PackIcon>
                                    <Label Foreground="White">Add</Label>
                                </StackPanel>

                            </Button>
                            <Button  Command="{Binding CloseAddCommand}" Background="Red">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="Close"></materialDesign:PackIcon>
                                    <Label Foreground="White">Close</Label>
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Grid>

                </GroupBox>
            </Grid  >

        </Grid>

    </Grid>
    
    
    
</Window>
